<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>로지스 유통 견적 문의</title>
    <link rel="stylesheet" href="./styles/common.css" />
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0" /> -->
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1, maximum-scale=1.0, user-scalable=no"
    />
  </head>
  <body>
    <div class="wrap">
      <div class="cntnt_box">
        <div id="header">
          <h2>로지스 유통 견적 문의</h2>
          <img class="ci" src="./assets/logo.svg" />
        </div>

        <div id="input_area">
          <form id="customForm">
            <!-- <label>메시지:</label><br /> -->
            <!-- name="message" -->
            <textarea
              name="entry.1271596132"
              rows="12"
              placeholder="예시&#41;
업체명: AJ
지역: 서울 송파구
1. 상품: 박스 / 규격: W450*H460*0.06MM / 사용량: 약 40,000장
2. 상품: 테이프 / 규격: W500*H600 / 사용량: 약 20,000롤 / 사용금액: 500,000원
요청사항: 납기 일정 회신 부탁드립니다.
 
&#8251; 정보가 없을 경우, 입력하지 않으셔도 됩니다."
            ></textarea>
            <button type="submit">문의 요청</button>
          </form>
        </div>
        <div id="result_area" style="display: none">
          <h2>접수 완료</h2>
          <div id="submittedData"></div>
          <button href="#" id="newResponseLink">신규 접수하기</button>
        </div>

        <div id="desc_area">
          <div>
            <button
              class="toggle toggle_01"
              onclick="toggleGuide('guideBox_01')"
            >
              📋 견적 요청 입력 가이드 보기/숨기기
            </button>
            <div id="guideBox_01" class="desc_box">
              <div id="guide_01" class="desc">
                <p>
                  업체명&#58; &#91;회사명&#93;<br />
                  지역&#58; &#91;납품지역&#93;<br />
                </p>

                <p>
                  1. 상품&#58; &#91;상품명&#93; &#47; 규격&#58; &#91;상품의
                  규격&#93; &#47; 사용량&#58; &#91;월 예상 사용량&#93; &#47;
                  사용금액&#58; &#91;월 예상 사용금액&#93; &#47; 인쇄&#58;
                  &#91;O&#47;X&#93;<br />
                  2. 상품&#58; &#91;상품명&#93; &#47; 규격&#58; &#91;상품의
                  규격&#93; &#47; 사용량&#58; &#91;월 예상 사용량&#93; &#47;
                  사용금액&#58; &#91;월 예상 사용금액&#93; &#47; 인쇄&#58;
                  &#91;O&#47;X&#93;<br />
                  3. 상품&#58; &#91;상품명&#93; &#47; 규격&#58; &#91;상품의
                  규격&#93; &#47; 사용량&#58; &#91;월 예상 사용량&#93; &#47;
                  사용금액&#58; &#91;월 예상 사용금액&#93; &#47; 인쇄&#58;
                  &#91;O&#47;X&#93;
                </p>

                <p>요청사항&#58; &#91;납기, 샘플 등 요청사항&#93;</p>
              </div>
            </div>
          </div>
          <div>
            <button
              class="toggle toggle_02"
              onclick="toggleGuide('guideBox_02')"
            >
              ⚠️ 입력 주의사항 보기/숨기기
            </button>
            <div id="guideBox_02" class="desc_box">
              <div id="guide_02" class="desc">
                <p>
                  1. 번호 표기 필수<br />
                  - 상품/규격별 정보는 반드시 1., 2., 3. 번호를 붙여
                  구분합니다.<br />
                  2. 상품명 표기<br />
                  - 동일 상품 + 여러 규격 → 상품&#58;은 한 번만 쓰고, 아래에
                  규격을 나열해도 가능<br />
                  - 서로 다른 상품 → 각 번호마다 반드시 개별 상품&#58;을 함께
                  작성<br />
                  3. 필수/선택 항목<br />
                  - 업체명, 지역, 상품은 필수<br />
                  - 규격, 사용량, 사용금액, 인쇄, 요청사항 등은 선택 (없는 값은
                  생략 가능)
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    function toggleGuide(e) {
      const guideBox = document.getElementById(e);
      guideBox.classList.toggle("open");
    }
    document
      .getElementById("customForm")
      .addEventListener("submit", async function (e) {
        e.preventDefault();

        const formData = new FormData(this);
        const values = Object.fromEntries(formData.entries()); // 제출 값 보관

        try {
          await fetch(
            "https://docs.google.com/forms/d/e/1FAIpQLSctYhlQvrIz8v9g041upLmtKANxDG6vHa8Y23l9VD59j1U1fg/formResponse",
            {
              method: "POST",
              body: formData,
              mode: "no-cors",
            }
          );

          // ✅ 입력 폼 + 가이드 영역 숨기기
          this.style.display = "none";
          document.getElementById("desc_area").style.display = "none";

          // 제출 데이터 화면에 표시
          const submittedDiv = document.getElementById("submittedData");
          submittedDiv.innerHTML = `
        <p>견적 문의 내용: ${values["entry.1271596132"]}</p> 
      `;

          // 결과 영역 표시
          document.getElementById("result_area").style.display = "block";

          // "다른 응답 제출하기" 클릭 시 → 다시 폼 & 가이드 표시
          document
            .getElementById("newResponseLink")
            .addEventListener("click", (ev) => {
              ev.preventDefault();
              document.getElementById("customForm").reset();
              document.getElementById("customForm").style.display = "block";
              document.getElementById("desc_area").style.display = "flex"; // 가이드 복원
              document.getElementById("result_area").style.display = "none";
            });
        } catch (err) {
          alert(
            "오류가 발생했습니다. 관리자에게 문의해 주세요.\nError: " + err
          );
        }
      });
  </script>
</html>
